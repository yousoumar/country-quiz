{"version":3,"sources":["assets/adventure.svg","components/Response/Response.js","assets/winners.svg","components/App/App.js","index.js"],"names":["Response","name","index","correctResponse","possibleShownResponses","addToRef","newQuestion","countriesSetState","countriesState","firstTestState","possibleResponsesState","possibleResponsesSetState","firstTestSetState","score","onClick","e","element","currentTarget","children","innerText","classList","add","querySelector","src","process","current","forEach","setTimeout","ref","String","fromCharCode","className","alt","App","storageCountries","JSON","parse","localStorage","getItem","useState","correctResponseState","correctResponseSetState","useRef","tourNumber","gameOverState","gameOverSetState","useEffect","play","fetch","then","response","json","data","setItem","stringify","country","Math","floor","random","length","countriesWithoutCurrentQuestionCountry","filter","item","possibleResponses","splice","includes","push","sortMethode","newPossibleResponses","sort","country1","country2","area","population","id","resultsImg","adventure","capital","map","target","href","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.53512251.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/adventure.182b6171.svg\";","import {useRef, useState} from 'react';\nexport default function Response(\n    {name, index, correctResponse, possibleShownResponses, addToRef, countriesSetState,  countriesState, newQuestion,possibleResponsesState, possibleResponsesSetState, firstTestState, firstTestSetState,score }) {\n    \n    function checkResponse(element) {\n\n        if(firstTestState){\n            firstTestSetState(false);\n            let userResponse = element.children[1].innerText;\n            if (userResponse === correctResponse.name){\n                element.classList.add('correct');\n                element.querySelector('img').src = process.env.PUBLIC_URL + '/images/correct.svg'\n                \n            }else{\n                score.current --;\n                element.classList.add('incorrect');\n                element.querySelector('img').src = process.env.PUBLIC_URL + '/images/incorrect.svg';\n                possibleShownResponses.forEach(element => {\n                    if (element.children[1].innerText === correctResponse.name){\n                        element.classList.add('correct');\n                        element.querySelector('img').src = process.env.PUBLIC_URL + '/images/correct.svg'\n                    }\n                });\n            }\n        }else{\n            return\n        }\n        \n        \n        setTimeout(()=>{\n            \n            firstTestSetState(true);\n            newQuestion();\n            \n        }, 1000)\n\n    }\n\n    return (\n        <li\n            key = {name} \n            onClick = {(e) => checkResponse(e.currentTarget)}\n            ref = {addToRef}\n            \n        >\n            <span>{String.fromCharCode(65 + index)}</span>\n            <span>{name}</span>\n            <span className = \"icon\"><img src=\"\" alt=\"\" /></span>\n        </li>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/winners.d76bfdf8.svg\";","import {useState, useEffect, useRef} from 'react';\nimport adventure from '../../assets/adventure.svg';\nimport Response from '../Response/Response';\nimport resultsImg from '../../assets/winners.svg';\n\nfunction App() {\n\n  // store data sent by the API\n  const storageCountries = JSON.parse(localStorage.getItem('countries')) ;\n  const [countriesState, countriesSetState] = useState([]);\n\n  // current question response\n  const [correctResponseState, correctResponseSetState] = useState({});\n\n  // current question possible responses\n  const [possibleResponsesState, possibleResponsesSetState] = useState([]);\n\n  // to store score\n  const score = useRef(5);\n\n  // count the number of game turns\n  let tourNumber = useRef(0);\n\n  const [gameOverState, gameOverSetState] = useState(false);\n  useEffect(() => {\n    \n    if (!storageCountries){\n      fetch(\"https://restcountries.eu/rest/v2/all\")\n      .then(response => response.json())\n      .then(data =>{\n        localStorage.setItem('countries', JSON.stringify(data));\n\n        let country = data[Math.floor(Math.random()*(data.length))];\n        let countriesWithoutCurrentQuestionCountry = data.filter(item => item.name !== country.name);\n        let possibleResponses = countriesWithoutCurrentQuestionCountry.splice(0, 3);\n        possibleResponses = [country, ...possibleResponses];\n\n        correctResponseSetState(country);\n        possibleResponsesSetState(possibleResponses);\n        countriesSetState(countriesWithoutCurrentQuestionCountry);\n      } );\n    }else{\n\n        play();\n\n    }\n   \n    \n    \n  }, []);\n\n\n  // to store possible responses reference\n  const ref = useRef([]);\n\n  function addToRef(element) {\n      \n    if (element && !(ref.current.includes(element))){\n      ref.current.push(element);\n    }  \n    \n  }\n  \n  let [firstTestState, firstTestSetState] = useState(true);\n  let sortMethode = useRef(true)\n\n  function newQuestion() {\n    tourNumber.current ++;\n    if(tourNumber.current >= 5){\n      gameOverSetState(true)\n    }\n    ref.current = [];\n    countriesSetState(countriesState.filter(item => item.name !== correctResponseState.name));\n    \n\n    let country,countriesWithoutCurrentQuestionCountry ,newPossibleResponses;\n    country = countriesState[Math.floor(Math.random()*(countriesState.length))];\n    if(!sortMethode.current){\n      sortMethode.current = !sortMethode.current\n      countriesWithoutCurrentQuestionCountry = countriesState.filter(item => item.name !== country.name).sort((country1, country2)=> (country2.population*Math.random()- country1.population*Math.random()));\n      newPossibleResponses = countriesWithoutCurrentQuestionCountry.splice(0, 3);\n      newPossibleResponses = [country, ...newPossibleResponses];\n      newPossibleResponses.sort((country1, country2)=> (country2.population*Math.random()- country1.population*Math.random()));\n    }else{\n      sortMethode.current = !sortMethode.current\n      countriesWithoutCurrentQuestionCountry = countriesState.filter(item => item.name !== country.name);\n      newPossibleResponses = countriesWithoutCurrentQuestionCountry.splice(0, 3);\n      newPossibleResponses.push(country);\n      newPossibleResponses.sort((country1, country2)=> (country2.area*Math.random() - country1.area*Math.random()))\n    }\n    countriesSetState(countriesWithoutCurrentQuestionCountry);\n    correctResponseSetState(country);\n    possibleResponsesSetState(newPossibleResponses);\n    firstTestSetState(true);\n  }\n  \n  function play(){\n    let country = storageCountries[Math.floor(Math.random()*(storageCountries.length))];\n    let countriesWithoutCurrentQuestionCountry = storageCountries.filter(item => item.name !== country.name);\n    let possibleResponses = countriesWithoutCurrentQuestionCountry.splice(0, 3);\n    possibleResponses = [country, ...possibleResponses];\n\n    correctResponseSetState(country);\n    possibleResponsesSetState(possibleResponses);\n    countriesSetState(countriesWithoutCurrentQuestionCountry);\n    tourNumber.current = 0;\n    score.current = 5;\n    gameOverSetState(false)\n  }\n  return (\n    <>\n    <div id=\"app\">\n      <h1>Country quiz</h1>\n      <div className=\"container\">\n        {\n          gameOverState ? \n          \n          <div className = \"results\">\n            <div className=\"img\"><img src={resultsImg} alt=\"\" /></div>\n            <h2>Results</h2>\n            <p>You got <span>{score.current}/5</span> correct answers</p>\n            <button className=\"button\" onClick = { e => play()}>\n              Try again\n            </button>\n          </div> \n          : \n          <>\n            <div className=\"logo\">\n            <img src={adventure}alt=\"\" /> \n            </div>\n            <div className=\"question\">{correctResponseState.capital} is the capital of ?</div>\n            <ul className=\"responses\">\n              {\n                \n                possibleResponsesState.map((response, index) => \n                                          <Response\n                                            name = {response.name}\n                                            key = {response.name} \n                                            index ={index}\n                                            correctResponse = {correctResponseState}\n                                            addToRef= {addToRef}\n                                            possibleShownResponses = {ref.current}\n                                            countriesSetState = {countriesSetState}\n                                            countriesState = {countriesState}\n                                            newQuestion = {newQuestion}\n                                            possibleResponsesSetState = {possibleResponsesSetState}\n                                            possibleResponsesState = {possibleResponsesState}\n                                            firstTestState = {firstTestState}\n                                            firstTestSetState ={ firstTestSetState}\n                                            gameOverSetState = {gameOverSetState}\n                                            score = {score}\n                                            tourNumber = {tourNumber}\n                                  \n                                          />\n                                          )\n                                          \n             }\n            </ul>\n          </>\n      \n          \n        }\n      </div>\n\n    </div>\n    <footer><p>created by <a target=\"_blank\" href=\"https://github.com/yousoumars\">yousoumar</a> - devchallenges.io</p></footer>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}