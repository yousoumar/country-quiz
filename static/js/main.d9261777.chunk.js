(this["webpackJsonpcountry-quiz"]=this["webpackJsonpcountry-quiz"]||[]).push([[0],{12:function(e,t,c){},14:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),s=c(7),a=c.n(s),i=(c(12),c(5)),o=c(2),u=c.p+"static/media/adventure.182b6171.svg",d=c(0);function l(e){var t=e.name,c=e.index,n=e.correctResponse,r=e.possibleShownResponses,s=e.addToRef,a=e.firstTestState,i=e.firstTestSetState,o=e.score,u=e.newQuestion;return Object(d.jsxs)("li",{onClick:function(e){return t=e.currentTarget,void(a&&(i(!1),t.children[1].innerText===n.name?(t.classList.add("correct"),t.querySelector("img").src="/country-quiz/images/correct.svg"):(o.current--,t.classList.add("incorrect"),t.querySelector("img").src="/country-quiz/images/incorrect.svg",r.forEach((function(e){e.children[1].innerText===n.name&&(e.classList.add("correct"),e.querySelector("img").src="/country-quiz/images/correct.svg")}))),setTimeout((function(){u()}),1500)));var t},ref:s,children:[Object(d.jsx)("span",{children:String.fromCharCode(65+c)}),Object(d.jsx)("span",{children:t}),Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("img",{src:"",alt:""})})]},t)}var j=c.p+"static/media/winners.d76bfdf8.svg",m=c.p+"static/media/loading.8a15e6ab.svg";function b(){return Object(d.jsxs)("div",{className:"loader",children:[Object(d.jsx)("img",{src:m,alt:""}),Object(d.jsx)("p",{children:"Loading ..."})]})}var h=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],s=JSON.parse(localStorage.getItem("countries")),a=Object(n.useState)({}),m=Object(o.a)(a,2),h=m[0],O=m[1],f=Object(n.useState)([]),p=Object(o.a)(f,2),g=p[0],x=p[1],v=Object(n.useState)(!0),S=Object(o.a)(v,2),M=S[0],C=S[1],N=Object(n.useState)(!1),T=Object(o.a)(N,2),y=T[0],I=T[1],q=Object(n.useState)(!1),R=Object(o.a)(q,2),w=R[0],z=R[1],k=Object(n.useState)(!1),E=Object(o.a)(k,2),J=E[0],L=E[1],F=Object(n.useState)(""),Q=Object(o.a)(F,2),W=Q[0],B=Q[1],P=Object(n.useRef)([]),Y=Object(n.useRef)(10),A=Object(n.useRef)(0);function D(e){e&&!P.current.includes(e)&&P.current.push(e)}function G(){var e,t;P.current=[],A.current++,A.current>10&&I(!0),e=c.splice(Math.floor(Math.random()*c.length),1)[0],c.sort((function(e,t){return parseInt(t.numericCode)*Math.random()-parseInt(e.numericCode)*Math.random()})),t=c.splice(0,3),t=[e].concat(Object(i.a)(t)).sort((function(e,t){return parseInt(t.numericCode)*Math.random()-parseInt(e.numericCode)*Math.random()})),O(e),x(t),z(!w),C(!0)}function H(){var e=s.splice(Math.floor(Math.random()*s.length),1)[0],t=s.splice(0,3);t=[].concat(Object(i.a)(t),[e]).sort((function(e,t){return parseInt(t.numericCode)*Math.random()-parseInt(e.numericCode)*Math.random()})),A.current=1,Y.current=10,O(e),x(t),r(s),I(!1)}return Object(n.useEffect)((function(){var e;return s?(H(),e=setTimeout((function(){B("loaded")}),1e3)):fetch("https://restcountries.eu/rest/v2/all").then((function(e){return e.json()})).then((function(t){(t=t.filter((function(e){return e.name&&e.capital&&e.flag&&e.numericCode}))).sort((function(e,t){return parseInt(t.numericCode)*Math.random()-parseInt(e.numericCode)*Math.random()})),localStorage.setItem("countries",JSON.stringify(t));var c=t.splice(Math.floor(Math.random()*t.length),1)[0],n=t.splice(0,3);n=[c].concat(Object(i.a)(n)).sort((function(e,t){return parseInt(t.numericCode)*Math.random()-parseInt(e.numericCode)*Math.random()})),O(c),x(n),r(t),e=setTimeout((function(){B("loaded")}),1e3)})).catch((function(){L(!0),e=setTimeout((function(){B("loaded")}),1e3)})),function(){clearTimeout(e)}}),[]),Object(d.jsx)(d.Fragment,{children:""===W?Object(d.jsx)(b,{}):Object(d.jsx)(d.Fragment,{children:J?Object(d.jsx)("p",{className:"apiError",children:"We have issues with our database. Please come back later :)"}):Object(d.jsxs)("div",{id:"app",children:[Object(d.jsx)("h1",{children:"Country quiz"}),Object(d.jsx)("div",{className:"container",children:y?Object(d.jsxs)("div",{className:"results",children:[Object(d.jsx)("div",{className:"img",children:Object(d.jsx)("img",{src:j,alt:""})}),Object(d.jsx)("h2",{children:"Results"}),Object(d.jsxs)("p",{children:["You got ",Object(d.jsxs)("span",{children:[Y.current,"/10"]})," correct answers."]}),Object(d.jsx)("button",{className:"button",onClick:function(e){return H()},children:"Try again"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"logo",children:Object(d.jsx)("img",{src:u,alt:""})}),Object(d.jsxs)("div",{className:"tour-number",children:[A.current,"/10"]}),w?Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"flag",children:Object(d.jsx)("img",{src:h.flag,alt:""})}),Object(d.jsx)("div",{className:"question",children:"Which country does this flag belong to? "})]}):Object(d.jsxs)("div",{className:"question",children:[h.capital," is the capital of ?"]}),Object(d.jsx)("ul",{className:"responses",children:g.map((function(e,t){return Object(d.jsx)(l,{name:e.name,index:t,correctResponse:h,addToRef:D,possibleShownResponses:P.current,firstTestState:M,firstTestSetState:C,score:Y,newQuestion:G},e.name)}))})]})})]})})})};a.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d9261777.chunk.js.map